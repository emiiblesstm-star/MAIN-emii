.smart-trader {
    height: 100%;
    width: 100%;
    display: flex;
    flex-direction: column;
    background: #1a1a2e;
    color: white;
    overflow: hidden;
    overflow-y: auto;

    &__title {
        text-align: center;
        padding: 1rem 0;
        background: linear-gradient(135deg, #667eea 0%, #764ba2 100%);
        margin-bottom: 1rem;
        
        h1 {
            font-size: 2rem;
            font-weight: bold;
            color: white;
            text-shadow: 
                0 1px 0 #ccc,
                0 2px 0 #c9c9c9,
                0 3px 0 #bbb,
                0 4px 0 #b9b9b9,
                0 5px 0 #aaa,
                0 6px 1px rgba(0,0,0,.1),
                0 0 5px rgba(0,0,0,.1),
                0 1px 3px rgba(0,0,0,.3),
                0 3px 5px rgba(0,0,0,.2),
                0 5px 10px rgba(0,0,0,.25);
            margin: 0;
            
            @media (max-width: 430px) {
                font-size: 1.2rem;
            }
        }
    }

    &__container {
        padding: 1.8rem;
        height: 100%;
        display: flex;
        flex-direction: column;
        gap: 1.8rem;
        overflow-y: auto;
        
        @media (max-width: 430px) {
            padding: 0.9rem;
            gap: 0.9rem;
            font-size: 0.5rem;
            transform-origin: top left;
            
            * {
                font-size: 0.6rem !important;
            }
            
            input, select, button {
                height: 16px !important;
                padding: 0.3rem 0.4rem !important;
                font-size: 0.6rem !important;
            }
            
            .smart-trader__digit {
                height: 22px !important;
                font-size: 0.7rem !important;
            }
        }
    }

    &__header {
        display: flex;
        flex-direction: column;
        gap: 0.6rem;
        border-bottom: 1px solid #444;
        padding-bottom: 1.2rem;
        
        @media (max-width: 430px) {
            gap: 0.3rem;
            padding-bottom: 0.6rem;
        }
    }

    &__content {
        flex: 1;
        display: flex;
        align-items: center;
        justify-content: center;
        overflow-x: hidden;
        position: relative;
        min-height: 0;
    }

    &__card {
        width: 100%;
        max-width: 980px;
        background: linear-gradient(180deg, #16213e, #1a1a2e);
        border: 1px solid #444;
        border-radius: 9px;
        padding: 1.2rem;
        display: flex;
        flex-direction: column;
        gap: 0.9rem;
        box-shadow: 0 6px 18px rgba(0,0,0,.5);
        
        @media (max-width: 430px) {
            padding: 0.6rem;
            gap: 0.45rem;
            border-radius: 4.5px;
        }
    }

    &__row {
        display: grid;
        gap: 0.9rem;

        &--mobile-three {
            grid-template-columns: repeat(3, 1fr);
            
            @media (max-width: 430px) {
                grid-template-columns: repeat(3, 1fr);
                gap: 0.45rem;
            }
        }

        &--compact { 
            grid-template-columns: repeat(4, 1fr);
            
            @media (max-width: 430px) {
                grid-template-columns: repeat(4, 1fr);
                gap: 0.3rem;
            }
            
            @media (max-width: 380px) {
                grid-template-columns: repeat(2, 1fr);
                gap: 0.3rem;
            }
        }
        &--two { 
            grid-template-columns: repeat(2, 1fr);
            
            @media (max-width: 430px) {
                grid-template-columns: repeat(2, 1fr);
                gap: 0.45rem;
            }
        }

        @media (max-width: 1024px) {
            grid-template-columns: repeat(2, 1fr);
        }
        @media (max-width: 640px) {
            grid-template-columns: 1fr;
        }
        @media (max-width: 430px) {
            gap: 0.45rem;
        }
    }

    &__field {
        display: flex;
        flex-direction: column;
        gap: 0.3rem;

        label {
            font-size: 0.9rem;
            color: #ccc;
            white-space: nowrap;
            overflow: hidden;
            text-overflow: ellipsis;
            
            @media (max-width: 430px) {
                font-size: 0.6rem !important;
            }
        }
        select,
        input {
            background: #2a2a3e;
            border: 1px solid #555;
            border-radius: 0.45rem;
            color: white;
            padding: 0.6rem 0.75rem;
            height: 28.5px;
            width: 100%;
            min-width: 0;
            
            &:focus {
                border-color: #667eea;
                outline: none;
            }
            
            @media (max-width: 430px) {
                padding: 0.3rem 0.4rem;
                height: 16px;
                border-radius: 0.225rem;
                font-size: 0.6rem !important;
            }
        }
    }

    &__actions {
        display: flex;
        justify-content: flex-end;
        gap: 0.6rem;
        margin-top: 0.6rem;
        
        @media (max-width: 430px) {
            gap: 0.3rem;
            margin-top: 0.3rem;
        }
    }

    &__run {
        background: #2e9f42;
        color: #fff;
        border: none;
        border-radius: 0.45rem;
        padding: 0.6rem 1.2rem;
        height: 30px;
        font-weight: 600;
        cursor: pointer;
        white-space: nowrap;

        &:disabled {
            opacity: 0.6;
            cursor: not-allowed;
        }
        
        @media (max-width: 430px) {
            padding: 0.3rem 0.6rem;
            height: 15px;
            font-size: 0.6rem !important;
            border-radius: 0.225rem;
        }
    }
    
    &__stop {
        background: #ef4444;
        color: #fff;
        border: none;
        border-radius: 0.45rem;
        padding: 0.6rem 0.9rem;
        height: 30px;
        font-weight: 600;
        cursor: pointer;
        white-space: nowrap;
        
        @media (max-width: 430px) {
            padding: 0.3rem 0.45rem;
            height: 15px;
            font-size: 0.6rem !important;
            border-radius: 0.225rem;
        }
    }

    &__digits {
        display: grid;
        grid-template-columns: repeat(10, minmax(33px, 1fr));
        gap: 0.6rem;
        margin-top: 0.3rem;

        @media (max-width: 640px) {
            grid-template-columns: repeat(5, minmax(33px, 1fr));
        }
        @media (max-width: 430px) {
            gap: 0.3rem;
            margin-top: 0.15rem;
            grid-template-columns: repeat(5, minmax(16.5px, 1fr));
        }
    }

    &__digit {
        height: 40.5px;
        border-radius: 7.5px;
        background: #2a2a3e;
        border: 1.5px solid #555;
        display: flex;
        align-items: center;
        justify-content: center;
        font-weight: 800;
        font-size: 1.05rem;
        letter-spacing: .375px;
        color: white;
        box-shadow: 0 1.5px 0 rgba(0,0,0,.12), inset 0 0 0 1.5px rgba(255,255,255,.03);
        transition: background .2s ease, border-color .2s ease, transform .08s ease, box-shadow .2s ease;

        &.is-current { 
            background: #fff6cc; 
            border-color: #fbbf24; 
            color: #1f2937; 
            transform: translateY(-0.75px); 
            box-shadow: 0 3px 9px rgba(250,204,21,.25), inset 0 0 0 1.5px rgba(255,255,255,.05); 
        }
        &.is-green { background: #dbfde9; border-color: #16a34a; color: #065f46; }
        &.is-red { background: #ffe4e6; border-color: #f43f5e; color: #7f1d1d; }
        &.is-neutral { background: #eef2ff; border-color: #6366f1; color: #1e3a8a; }
        
        @media (max-width: 430px) {
            height: 20.25px;
            border-radius: 3.75px;
            border-width: 0.75px;
            font-size: 0.7rem !important;
            letter-spacing: 0.1875px;
        }
    }

    &__meta {
        display: flex;
        justify-content: space-between;
        margin-top: 0.45rem;
        
        @media (max-width: 430px) {
            margin-top: 0.225rem;
        }
    }

    &__status {
        margin-top: 0.3rem;
        
        @media (max-width: 430px) {
            margin-top: 0.15rem;
        }
    }

    .text-xs { font-size: 0.5625rem; color: white; }
    .text-sm { font-size: 0.65625rem; color: white; }
    .text-base { font-size: 0.75rem; color: white; }
    .text-general { color: #ccc; }
    .text-prominent { color: white; }
    .text-loss-danger { color: #ff6b6b; }
    .text-default { color: white; }
}

@media (max-width: 430px) {
    .smart-trader {
        font-size: 0.5rem;
        
        .text-xs {
            font-size: 0.5rem !important;
        }
        
        .text-sm {
            font-size: 0.6rem !important;
        }
        
        .text-base {
            font-size: 0.7rem !important;
        }
    }
}

/* ---------------- Circles UI ---------------- */
.st-circles-wrapper { 
    width: 100%; 
}

.st-circles__container {
    position: relative;
    width: 100%;
    display: flex;
    gap: clamp(4px, 2vw, 12px);
    align-items: center;
    justify-content: space-between;
    padding: 20px 8px 40px 8px;
    box-sizing: border-box;
    
    @media (max-width: 430px) {
        gap: 6px;
        padding: 15px 4px 35px 4px;
    }
}

/* Fixed triangle cursor - single red triangle below circles */
.st-circles__indicator {
    position: absolute;
    bottom: 8px;
    width: 0;
    height: 0;
    border-left: 8px solid transparent;
    border-right: 8px solid transparent;
    border-top: 12px solid #ff6b35;
    z-index: 30;
    pointer-events: none;
    transition: left 0.3s ease;
    
    @media (max-width: 430px) {
        bottom: 6px;
        border-left: 6px solid transparent;
        border-right: 6px solid transparent;
        border-top: 10px solid #ff6b35;
    }
}

/* each circle */
.st-circle {
    flex: 1 1 0;
    display: flex;
    flex-direction: column;
    align-items: center;
    min-width: 0;
    position: relative;
}

.st-circle__svg { 
    width: clamp(56px, 8vw, 80px);
    height: clamp(56px, 8vw, 80px);
    display: block;
    
    @media (max-width: 430px) {
        width: clamp(40px, 12vw, 60px);
        height: clamp(40px, 12vw, 60px);
    }
}

/* background ring */
.st-circle__bg { 
    stroke: rgba(100,100,100,0.2); 
    stroke-width: 4; 
    fill: none; 
}

/* progress ring */
.st-circle__progress { 
    stroke-linecap: round; 
    transition: stroke-dasharray 260ms ease, stroke 260ms ease; 
}

/* Fixed label positioning and colors for visibility */
.st-circle__label {
    position: absolute;
    top: 50%;
    left: 50%;
    transform: translate(-50%, -50%);
    text-align: center;
    pointer-events: none;
    display: flex;
    flex-direction: column;
    align-items: center;
    justify-content: center;
}

.st-circle__digit { 
    font-weight: bold; 
    font-size: clamp(18px, 3vw, 24px);
    color: white;
    line-height: 1;
    margin-bottom: 2px;
    
    &.is-current { 
        color: #fbbf24; 
        font-weight: 900; 
        text-shadow: 0 0 8px rgba(251, 191, 36, 0.6);
    }
    
    @media (max-width: 430px) {
        font-size: clamp(14px, 4vw, 18px);
    }
}

.st-circle__percent { 
    font-size: clamp(9px, 1.2vw, 11px);
    color: rgba(255,255,255,0.8);
    line-height: 1;
    font-weight: 500;
    
    @media (max-width: 430px) {
        font-size: clamp(8px, 1.5vw, 10px);
    }
}

:root { 
    --st-green: #16a34a; 
    --st-red: #f43f5e; 
}

.st-circle__progress { 
    filter: drop-shadow(0 3px 4.5px rgba(0,0,0,0.06)); 
}

table { 
    width: 100%; 
    border-collapse: collapse; 
    
    th, td { 
        padding: 4.5px 6px; 
        text-align: left; 
        font-size: 0.675rem; 
        color: white;
        border-bottom: 1px solid #444;
    }
    
    th {
        background: #2a2a3e;
        font-weight: bold;
    }
    
    select, input {
        background: #2a2a3e;
        border: 1px solid #555;
        color: white;
        border-radius: 4px;
        padding: 2px 4px;
        font-size: 0.6rem;
        width: 100%;
        
        &:focus {
            border-color: #667eea;
            outline: none;
        }
    }
    
    button {
        background: #ef4444;
        color: white;
        border: none;
        border-radius: 4px;
        padding: 2px 6px;
        font-size: 0.6rem;
        cursor: pointer;
        white-space: nowrap;
        
        &:hover {
            background: #dc2626;
        }
    }
}

/* Mobile-specific compact layouts */
@media (max-width: 430px) {
    .smart-trader__row--compact {
        .smart-trader__field {
            min-width: 0;
            
            label {
                font-size: 0.5rem !important;
                white-space: nowrap;
                overflow: hidden;
                text-overflow: ellipsis;
            }
            
            select, input {
                font-size: 0.5rem !important;
                padding: 0.2rem 0.3rem !important;
                height: 14px !important;
            }
        }
    }
}

/* Ensure all compact rows stay in one line on mobile */
.smart-trader__row--compact {
    @media (max-width: 430px) {
        display: grid !important;
        grid-template-columns: repeat(4, 1fr) !important;
        gap: 0.3rem !important;
        
        .smart-trader__field {
            min-width: 0;
            overflow: hidden;
        }
    }
    
    @media (max-width: 380px) {
        grid-template-columns: repeat(2, 1fr) !important;
    }
}
